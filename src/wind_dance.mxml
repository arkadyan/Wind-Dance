<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" 
		layout="absolute" 
		width="620" height="680" 
		initialize="init()">
	
	
	<mx:Script>
		<![CDATA[
			
			private function init():void {
				setDataGridColumns();
			}
			
			private function setDataGridColumns():void {
				dataGrid.columns = [dataGrid.nameColumn, dataGrid.typeColumn, dataGrid.sizeColumn];
			}
			
			
			private function displayFilePicker():void {
				filePickerView.visible = true;
			}
			
			private function loadInputFile(selectedPath:String):void {
				// Hide any old error messages				
				filePickerErrorsView.visible = false;
				
				// TODO: Test for selected file.
				if (!selectedPath) {
					filePickerErrorsText.text = "Please select a file";
					filePickerErrorsView.visible = true;
				} else {
					// TODO: Load the file.
					
					filePickerView.visible = false;
				}
				
				
				
			}
			
		]]>
	</mx:Script>
	
	
	<mx:VBox 
			x="0" y="0" 
			horizontalAlign="center" verticalAlign="top" 
			verticalGap="10"
			paddingTop="10" paddingLeft="10" paddingRight="10" paddingBottom="10">
		
		<mx:Canvas id="canvas" 
				width="600" height="600" 
				backgroundColor="#FFFFFF">
			
		</mx:Canvas>
		
		<mx:HBox width="100%" horizontalAlign="center" horizontalGap="10">
			
			<mx:Button label="Load File" 
					click="displayFilePicker()"/>
			
			<mx:Button label="Print"/>
			
		</mx:HBox>
		
	</mx:VBox>
	
	
	<mx:VBox id="filePickerView" 
			visible="false" x="50" y="200"
			backgroundColor="#888888" 
			paddingBottom="10" paddingLeft="10" paddingRight="10" paddingTop="10">
			
		<mx:HBox id="filePickerErrorsView"
				width="100%" 
				backgroundColor="#FFFFFF" 
				visible="false">
				
			<mx:Label id="filePickerErrorsText"
					text="" 
					color="#FF0000"/>
			
		</mx:HBox>
		
		<mx:HDividedBox>
			<mx:FileSystemTree id="tree" 
				width="200" height="100%" 
				directory="{File.userDirectory}" 
				enumerationMode="directoriesOnly" 
				change="dataGrid.directory = File(tree.selectedItem);"/>
			<mx:FileSystemDataGrid id="dataGrid" 
				width="100%" height="100%"
				directory="{File.userDirectory}"/>
		</mx:HDividedBox>
		
		<mx:Button id="openFileButton" 
			label="Open File" 
			click="loadInputFile(dataGrid.selectedPath)"/>
			
	</mx:VBox>
	
</mx:WindowedApplication>
