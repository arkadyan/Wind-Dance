(function(a,b){a.tooltip=function(c){this.options=b.extend(true,{button:null,position:{my:"center bottom",at:"center top",of:null,offset:"0 -14",collision:"none none"},content:null,delayShow:100,delayHide:100,hoverClass:null},c?c:{});this.options.position.of=this.options.button;this.initialized=false;this.visible=false;this.container=null;this.contentArea=null;this.arrow=null;this.enable()};a.tooltip.prototype.initialize=function(){this.container=b("<div></div>");this.container.css({position:"absolute",top:0,left:0});this.container.addClass("tooltip br3 bs005x333");this.contentArea=b("<div>Loading&hellip;</div>").appendTo(this.container);this.arrow=b("<div></div>").addClass("ttPoint").appendTo(this.container);this.arrow.css({position:"absolute",top:0,left:0});this.container.hide();this.container.appendTo(document.body);var c=b(this.options.button);this.container.mouseenter(function(d){c.stop(true)}).mouseleave(function(d){c.mouseleave()});this.initialized=true};a.tooltip.prototype.enable=function(){var c=this;var e=b(this.options.button);var d=this.options;e.bind("mouseenter.tooltip",function(f){if(c.visible){return}c.visible=true;e.stop(true).delay(d.delayShow).queue(function(h){if(!c.initialized){c.initialize()}c.container.show();if(b.isFunction(d.content)){var g=d.content(c);if(g){c.write(g)}}else{if(d.content!==null){c.write(d.content)}}c.position();e.addClass(d.hoverClass);c.container.addClass(d.hoverClass);h()})});e.bind("mouseleave.tooltip",function(f){e.stop(true).delay(d.delayHide).queue(function(g){if(c.container){c.container.hide();c.container.removeClass(d.hoverClass)}c.visible=false});e.removeClass(d.hoverClass)})};a.tooltip.prototype.disable=function(){var c=b(this.options.button);c.unbind("mouseenter.tooltip");c.unbind("mouseleave.tooltip")};a.tooltip.prototype.position=function(){this.container.position(this.options.position);var c=b.extend(true,{},this.options.position,{offset:"0 0",collision:"none none"});this.arrow.position(c);this.arrow.css({top:""})};a.tooltip.prototype.remove=function(){this.disable();if(this.container){this.container.remove()}this.initialized=false;this.visible=false};a.tooltip.prototype.write=function(c){this.contentArea.html(c)};a.tooltip.prototype.getContainer=function(){return this.contentArea}})(wui,jQuery);(function(a,d){var b={};var c=[];a.glossary={};a.glossary.initialize=function(e){b=d.extend({selector:"dfn",url:"/glossary/responder.html",cache:{},tooltip:{delayShow:300,delayHide:300,hoverClass:null,position:{collision:"fit none"}}},e?e:{});this.start()};a.glossary.start=function(){d(b.selector).each(function(f){var e=d(this);var g=b.tooltip;g.button=e;g.content=function(j){var i=e.attr("data-term");if(!i){i=e.text()}a.glossary.lookup(i,j)};var h=new a.tooltip(g);c.push(h)})};a.glossary.stop=function(){while(c.length>0){var e=c.pop();e.remove()}};a.glossary.lookup=function(e,f){if(b.cache[e]){f.write(b.cache[e]);f.position()}else{d.ajax({url:b.url,dataType:"html",data:{term:e},success:function(g,h){b.cache[e]=g;f.write(g);f.position()}})}};d(document).ready(function(){a.glossary.initialize();d(".casterMapMarker").each(function(f){var e=d(this);var g=e.next("div").html();e.removeClass("none");e.css({left:parseFloat(e.css("left"))-e.width()/2,top:parseFloat(e.css("top"))-e.height()/2});new a.tooltip({button:e,content:g,hoverClass:"hover",position:{collision:"fit none"}})})})})(wui,jQuery);